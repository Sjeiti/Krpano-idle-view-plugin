<!DOCTYPE html>
<html>
<head>
	<title>Krpano idle view plugin</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<style>
		html { height:100%; }
		body { height:100%; overflow: hidden; margin:0; padding:0; font-family:Arial, Helvetica, sans-serif; font-size:16px; color:#FFFFFF; background-color:#000000; }
		a{ color:#AAAAAA; text-decoration:underline; }
		a:hover{ color:#FFFFFF; text-decoration:underline; }
		.pano-wrap { width:100%;height:100%; }
	</style>
</head>
<body>
	<script src="swfkrpano.js"></script>
	<script src="krpanoiphone.js"></script>
	<script>
		create('krpanoDIV','example.xml',function(){
			console.log('created'); // log
		});
		function create(id,xml,callback){
			var oViewer
				,mPanoDiv = (function(elm){
						elm.setAttribute('id',id);
						elm.setAttribute('class','pano-wrap');
						return elm;
					})(document.createElement('div'))
				,oViewer = createPanoViewer({
					id:			'_'+id
					,target:	id
					,xml:		xml
					,onready:	function(instance){
						instance.classList.add('panorama');
						if (callback) callback(instance);
					}
					,onerror:	function(err){
						console.warn(err)
					}
					,html5:		'prefer'
					,swf:		'krpano.swf'
				})
			;
			document.body.appendChild(mPanoDiv);
			if (oViewer.isHTML5possible()) {
				oViewer.embed();
			} else {
				mPanoDiv.innerHTML = 'A Webkit based browser with support for CSS 3D tranforms is necessary to view this page!<br/>At the moment this are only the latest Safari or Chrome browsers or the browsers on iOS devices (iPhone,iPad,iPod Touch).<br/><br/><a href="http://www.apple.com/safari/download/" target="_blank"><img src="http://www.browserchoice.eu/Resources/Images/Safari_logo.jpg" style="border:0;" alt="Get Safari" /></a>&nbsp;<a href="http://www.google.com/chrome/" target="_blank"><img src="http://www.browserchoice.eu/Resources/Images/Chrome_logo.png" style="border:0;" alt="Get Chrome" /></a>';
			}
			return oViewer;
		}
	</script>
</body>
</html>
